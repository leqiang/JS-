<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>01_上下文-this</title>
</head>

<body>
<!--
1. 本质上任何函数在执行时都是通过某个对象调用的
2. this就代表调用函数的当前对象
3. 在定义函数时, this还没有确定, 只有在执行时才确定
4. 当调用函数时没有明确指定当前对象，this就是全局对象window
-->
<script type="text/javascript">
  function Person(color) {
    // console.log(this);
    this.color = color;
    this.getColor = function () {
      // console.log(this);
      return this.color;
    };
    this.setColor = function (color) {
      // console.log(this);
      this.color = color;
    };
  }

  Person("red"); //this是谁?

  var p = new Person("yello"); //this是谁?

  p.getColor(); //this是谁?

  var obj = {};
  p.setColor.call(obj, "black"); //this是谁?

  var test = p.setColor;
  test(); //this是谁?

  function fun1() {
    function fun2() {
      console.log(this);
    }
    fun2(); //this是谁?
  }
  fun1();
</script>
</body>
</html>